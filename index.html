<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DivertScanâ„¢ Test</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, sans-serif; background: #0f172a; color: #e2e8f0; padding: 20px; }
        .box { background: #1e293b; border-radius: 8px; padding: 16px; margin-bottom: 16px; }
        h1 { color: #10b981; margin-bottom: 20px; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        #log { font-family: monospace; font-size: 14px; }
        #log div { padding: 8px 0; border-bottom: 1px solid #334155; }
    </style>
</head>
<body>
    <h1>ðŸ”§ DivertScanâ„¢ Basic Test</h1>
    
    <div class="box">
        <div id="log"></div>
    </div>

    <script>
    function log(msg, type) {
        var el = document.getElementById('log');
        var div = document.createElement('div');
        div.className = type || 'info';
        div.textContent = msg;
        el.appendChild(div);
    }
    
    log('1. JavaScript is running âœ“', 'success');
    log('2. Current URL: ' + window.location.href, 'info');
    log('3. Testing Supabase CDN...', 'info');
    
    var script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2';
    script.onload = function() {
        log('4. Supabase CDN loaded âœ“', 'success');
        
        try {
            log('5. Creating Supabase client...', 'info');
            var supabase = window.supabase.createClient(
                'https://cyvvlngtojagfoaitoog.supabase.co',
                'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN5dnZsbmd0b2phZ2ZvYWl0b29nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkyODk4OTAsImV4cCI6MjA4NDg2NTg5MH0.CltpTET2wFfl5kaHFOGmUS8tR8bRFCjbtWDdVrC5r0g'
            );
            log('6. Supabase client created âœ“', 'success');
            
            log('7. Checking auth session...', 'info');
            supabase.auth.getSession().then(function(result) {
                if (result.error) {
                    log('8. Session error: ' + result.error.message, 'error');
                } else if (result.data.session) {
                    log('8. User logged in: ' + result.data.session.user.email, 'success');
                } else {
                    log('8. No session (need to sign in)', 'info');
                }
                log('=== ALL TESTS PASSED ===', 'success');
                log('The full app should work! Refresh to load it.', 'info');
            }).catch(function(err) {
                log('8. Session check failed: ' + err.message, 'error');
            });
            
        } catch(e) {
            log('ERROR creating client: ' + e.message, 'error');
        }
    };
    script.onerror = function() {
        log('4. FAILED to load Supabase CDN!', 'error');
        log('This might be a network/firewall issue.', 'error');
    };
    document.head.appendChild(script);
    </script>
</body>
</html>
